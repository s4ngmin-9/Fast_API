# 📦 Poetry 버전 관리 & 하위 호환성

---

## 1️⃣ Poetry 버전 지정 방식

| 표기 | 의미 | 예시 |
|------|------|------|
| `^x.y.z` | **하위 호환성을 깨지 않는 범위**의 최신 버전 설치 | `fastapi = "^0.115.6"` → `0.115.x` 최신 설치 |
| `~x.y.z` | **버그 수정(Patch) 범위** 내에서만 업데이트 | `fastapi = "~0.115.6"` → `0.115.6 ~ 0.115.9` |

📌 **Poetry 설치 동작**
1. `poetry.lock` 파일이 있으면 → **잠금된 정확한 버전** 설치  
2. 없으면 → `pyproject.toml` 규칙에 맞춰 설치 후, lock 파일 생성

---

## 2️⃣ Semantic Versioning (SemVer)

버전 번호: **`x.y.z`**

| 자리 | 의미 | 예시 변경 사항 |
|------|------|----------------|
| **x (Major)** | 하위 호환성 깨짐 | 함수 시그니처 변경, API 응답 형식 변경 |
| **y (Minor)** | 기능 추가 (하위 호환 유지) | 새로운 엔드포인트 추가 |
| **z (Patch)** | 버그 수정 (하위 호환 유지) | 버그 패치, 성능 개선 |

---

## 3️⃣ 하위 호환성 예시

```python
# 기존 함수
def add_ints(a: int, b: int) -> int:
    return a + b

print(add_ints(1, 3))  # ✅ 정상 작동

❌ 하위 호환성 깨짐

# 새로운 버전 - 인자 추가
def add_ints(a: int, b: int, c: int) -> int:
    return sum((a, b, c))

# 기존 호출 → 에러
# TypeError: add_ints() missing 1 required positional argument: 'c'

✅ 하위 호환성 유지

# 기본값 제공 → 기존 호출 가능
def add_ints(a: int, b: int, c: int = 0) -> int:
    return sum((a, b, c))

print(add_ints(1, 3))    # 4
print(add_ints(1, 3, 5)) # 9
